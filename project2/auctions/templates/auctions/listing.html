{% extends "auctions/layout.html" %}

{% block body %}
    <h1>Listing: {{ listing }}</h1>
    <div>
        <img src="{{ listing.image_url }}" alt="image-url">
    </div>
    <div>
        <h2>Current bid: {{ curr_highest_bid }}</h2>
        <p>{{ total_bid_count }} bid(s) so far.
            {% if is_current_bid %}
                Your bid is the current bid.
            {% endif %}
        </p>
    </div>
    <div class="form-group">
        <form class="" action="{% url 'listing' listing.id %}" method="post">
            {% csrf_token %}
            {% if error_message %}
                {{ error_message }}
            {% endif %}
            <div class="form-group">
                <input autofocus class="form-control" type="text" name="new-bid" placeholder="Place your new bid here">
            </div>
            <input class="btn btn-primary" type="submit" value="Place Bid">
            {% if user.is_authenticated %}
            <button class="btn btn-primary" type="submit" name="Close Bid" formaction="{% url 'close' listing.id %}">Close Bid</button>
            {% endif %}
        </form>
    </div>
    <hr>
    <h1>Details:</h1>
    <div class="">
        <li>Listed by: {{ listing.user }}</li>
        <li>Category: {{ listing.category }}</li>
        <li>Description: {{ listing.desrc }}</li>
    </div>
{% endblock %}
